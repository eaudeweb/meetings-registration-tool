{% extends "meetings/_base.html" %}
{% from "_bits.html" import breadcrumb %}


{% block title %} {{ title }} {% endblock %}


{% block breadcrumb %}

  {{ breadcrumb( [
      ('', 'Provisional list'),
  ] ) }}

{% endblock %}


{% block head %}

  <link rel="stylesheet"
        href="{{ url_for('static', filename='css/printouts.css') }}">

{% endblock %}


{% block content %}

  {{ super() }}

  <form method="GET">
    <div class="panel panel-default">
      <div class="panel-heading"><b>{{ title }}</b></div>
      <div class="panel-body">
        {{ flag_form.flag(
            class_="form-control form-reset-control select") }}
        <hr>
        <p>
          Select which fields to display
        </p>
        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr 1fr 1fr">
        {% for field in all_fields %}
          <div>
            <input {% if field.id in selected_field_ids %}checked{% endif %}
                   class="" id="{{ field.id }}"
                   name="{{ field.name }}"
                   placeholder="{{ field.label.text }}" type="checkbox" >
            <label for="{{ field.id }}">{{ field.label.text }}</label>
          </div>
        {% endfor %}
        </div>
        <div class="form-actions">
          <button type="submit" class="btn btn-primary">Preview</button>
        </div>
      </div>
    </div>
  </form>

  <div id="infinite-scroll-container" class="printout-container">

    <div>
      <form method="POST" class="text-right">
        <button class="btn btn-danger btn-sm btn-download" type="submit">
          <span class="glyphicon glyphicon-download"></span>
          Download as pdf
        </button>
      </form>
    </div>

    {% with title=title %}
      {% include "meetings/printouts/_provisional_list_table.html" %}
    {% endwith %}

    <div class="printout-loading"></div>

    <ul class="pagination">
      {% if pagination.has_prev %}
        {% set prev_url = url_for('.printouts_provisional_list',
                                  page=pagination.prev().page,
                                  flag=flag.slug) %}
        <li><a href="{{ prev_url }}">Previous</a></li>
      {% endif %}
      {% if pagination.has_next %}
        {% set next_url = url_for('.printouts_provisional_list',
                                  page=pagination.next().page,
                                  flag=flag.slug) %}
        <li><a href="{{ next_url }}" class="next">Next</a></li>
      {% endif %}
    </ul>

  </div>

{% endblock %}
