{% extends "meetings/_base.html" %}
{% from "_bits.html" import breadcrumb, form_group, flashed_messages %}


{% set title = participant.name %}


{% block title %} {{ title }} {% endblock %}


{% block head %}

  {% assets "upload_css" %}
    <link rel="stylesheet" href="{{ ASSET_URL }}">
  {% endassets %}

{% endblock %}


{% block scripts %}

  {% assets "upload_js" %}
     <script src="{{ ASSET_URL }}"></script>
  {% endassets %}

{% endblock %}


{% block breadcrumb %}
  {% if g.meeting.meeting_type != g.meeting.DEFAULT_TYPE %}
    {{ breadcrumb( [
        (url_for('meetings.participants'), 'Participants'),
        ('', title)
    ] ) }}
  {% endif %}

{% endblock %}

{% block messages %}
  {% if g.meeting.meeting_type == g.meeting.DEFAULT_TYPE %}
    {{ flashed_messages() }}
  {% endif %}
{% endblock %}


{% block content %}
  {% if g.meeting.meeting_type != g.meeting.DEFAULT_TYPE %}
    {{ super() }}
    <h3 class="page-title" style="margin: 0">{{ title }}</h3>
    {% set edit_url = url_for('.participant_edit',
                         participant_id=participant.id) %}
  {% else %}
    <div class="page-header">
      <h2>{{ title }} - Default Participant</h2>
    </div>
    {% set edit_url = url_for('.default_participant_edit',
                         participant_id=participant.id) %}
  {% endif %}


  <div class="actions">
    <a href="{{ edit_url }}" class="btn btn-primary btn-sm">
      <span class="glyphicon glyphicon-pencil"></span> &nbsp;
      Edit participant</a>

    {% if g.meeting.meeting_type != g.meeting.DEFAULT_TYPE %}
      {% include "meetings/participant/_detail_actions.html" %}
    {% endif %}
  </div>

  <div class="row">

    <div class="col-sm-7">

      <h5>Participant details</h5>

      <div class="table-responsive">

        <table class="table table-bordered table-condensed table-striped">
          <tbody>
            {% for field in form %}
              <tr>
                <th class="col-sm-3">{{ field.label.text }}</th>
                <td>
                  {% if field.type == 'CategoryField' %}
                    {% set choices = field.choices|dict %}
                    {{ choices[field.data] }}
                  {% elif field.name == 'email' %}
                    <a href="mailto:{{ field.data }}">{{ field.data }}</a>
                  {% else %}
                    {{ field.data }}
                  {% endif %}
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>

      </div> {# table-responsive #}

    </div> {# cols-#}

    <div class="col-sm-5">
      <h5>Photo Files</h5>
      {% for field in images_form %}
        {% include "meetings/participant/_image_widget.html" %}
      {% endfor %}
      {% include "meetings/participant/_detail_flags.html" %}
    </div>

  </div>

{% endblock %}
