{% extends "meetings/_base.html" %}
{% from "_bits.html" import breadcrumb %}


{% set title = "Fields" %}

{% block title %} {{ title }} {% endblock %}


{% block breadcrumb %}

  {{ breadcrumb( [ ('', title) ] ) }}

{% endblock %}


{% block content %}

  {{ super() }}

  <h3 class="page-title">{{ title }}</h3>

  <div class="actions">
    {% set url = url_for('.custom_field_edit') %}
    <a href="{{ url }}" class="btn btn-primary btn-sm">
      <span class="glyphicon glyphicon-pencil"></span> &nbsp;
      Add Field</a>
  </div>

  <table class="table table-bordered table-condensed sortable"
         data-url="{{ url_for('.custom_field_update_position') }}">

    <thead>
      <th class="handler"></th>
      <th>Label</th>
      <th>Type</th>
      <th>Required</th>
      <th class="text-right col-sm-3">Visible on registration form</th>
    </thead>

    <tbody>
      {% for field in custom_fields %}
        {% set url = url_for('.custom_field_edit',
                             custom_field_id=field.id)%}
        <tr id="items-{{ field.id }}"
            class="{% if field.is_primary %}highlight{% endif %}">
          <td class="handler">
            <span class="glyphicon glyphicon-align-justify"></span>
          </td>
          <td>
            {% if field.is_primary %}
              <b>{{ field.label }}</b>
            {% else %}
              <a href="{{ url }}">{{ field.label }}</a>
            {% endif %}
          </td>
          <td>{{ field.field_type.value }}</td>
          <td><span class="glyphicon {% if field.required %} glyphicon-ok {% else %} glyphicon-remove {% endif %}"></span></td>
          <td class="text-right"><span class="glyphicon {% if field.visible_on_registration_form %} glyphicon-ok {% else %} glyphicon-remove {% endif %}"></span></td>
        </tr>
      {% endfor %}
    </tbody>

  </table>

{% endblock %}
